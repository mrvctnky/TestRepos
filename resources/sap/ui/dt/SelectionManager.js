/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/base/ManagedObject','sap/ui/dt/OverlayRegistry','sap/ui/dt/Util','sap/ui/base/Object','./library'],function(M,O,U,B){"use strict";var S=M.extend("sap.ui.dt.SelectionManager",{metadata:{library:"sap.ui.dt",aggregations:{},events:{"change":{parameters:{selection:{type:"sap.ui.dt.Overlay[]"}}}}}});S.prototype.init=function(){this._aSelection=[];};S.prototype.exit=function(){delete this._aSelection;};S.prototype.get=function(){return this._aSelection.slice();};S.prototype.set=function(s){var b=false;var a=false;if(this._aSelection.length==0&&!s){return b;}this._aSelection.forEach(function(o){o.setSelected(false,true);b=true;},this);this._aSelection=[];if(s){a=this.add(U.castArray(s));}if(a){return a;}else if(b){this.fireChange({selection:this.get()});}return b;};S.prototype.add=function(s){var b=false;if(!s){return b;}var a=U.castArray(s);a.forEach(function(o){var c=null;c=O.getOverlay(o);if(c&&(this._aSelection.indexOf(c)===-1)){if(c.setSelected(true,true).getSelected()){this._aSelection.push(c);b=true;}}},this);if(b){this.fireChange({selection:this.get()});}return b;};S.prototype.remove=function(s){var b=false;if(!s){return b;}var a=U.castArray(s);a.forEach(function(r){this._aSelection=this._aSelection.filter(function(o){var R=false;var c=O.getOverlay(r);if(!c){var c=B.isA(r,'sap.ui.dt.ElementOverlay')?r:undefined;if(!c){R=r===o.getElement().getId();}}if(!R){R=c===o;}if(R){o.setSelected(false,true);b=true;}return!R;});},this);if(b){this.fireChange({selection:this.get()});}return b;};return S;},true);
