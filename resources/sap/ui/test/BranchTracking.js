/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
(function(){"use strict";var f=[],s=[],r=/\w/;function b(F,B,i,L){if(B>=0){if(i){s[F].branchTracking[B].truthy=true;}else{s[F].branchTracking[B].falsy=true;}}if(L>=0){l(F,L);}return i;}function g(){var S,o=document.getElementsByTagName("script"),i,n;for(i=0,n=o.length;i<n;i+=1){S=o[i];if(/BranchTracking.js$/.test(S.getAttribute("src"))){return S;}}}function a(o,S){var B=blanket.options("branchTracking"),i=false,n,F=f.length,p=o.inputFileName,q,t=o.inputFile,w;if(t.indexOf("// sap-ui-cover-browser msie")>=0){i=true;n=sap.ui.require("sap/ui/Device");if(n&&n.browser.msie){n=undefined;}}f.push(p);s[F]=_$blanket[p]=[];if(B){_$blanket[p].branchTracking=[];}_$blanket[p].source=t.split("\n");w=""+falafel(t,{attachComment:i,comment:i,loc:true,range:true,source:t},v.bind(null,B,F,n));q=w.split("\n").length;if(q!==_$blanket[p].source.length){jQuery.sap.log.warning("Line length mismatch! "+_$blanket[p].source.length+" vs. "+q,p,"sap.ui.test.BranchTracking");}S(w);}function c(i,n){if(!("$ignored"in n)){if(n.parent&&c(i,n.parent)){n.$ignored=true;}else{n.$ignored=n.type==="BlockStatement"&&d(i,n);}}return n.$ignored;}function d(i,n){function o(p){return p.type==="Line"&&p.value===" sap-ui-cover-browser msie"&&!(i&&i.browser.msie);}return n.body[0].leadingComments&&n.body[0].leadingComments.some(o);}function l(F,L){s[F][L]+=1;}function v(B,F,i,n){var H=s[F],o=H.branchTracking,L=n.loc.start.line,p;function q(){n.update("blanket.$l("+F+", "+L+"); "+n.source());t();return true;}function t(){if(L in H){jQuery.sap.log.warning("Duplicate line "+L,f[F],"sap.ui.test.BranchTracking");}H[L]=0;}function w(){var S=n.loc.source.slice(n.left.range[1],n.right.range[0]);if(S[0]===")"){S=S.slice(1);}if(S.slice(-1)==="("){S=S.slice(0,-1);}return S;}if(i&&c(i,n)){return false;}switch(n.type){case"AssignmentExpression":case"ArrayExpression":case"BlockStatement":case"BinaryExpression":case"Block":case"CallExpression":case"CatchClause":case"DebuggerStatement":case"EmptyStatement":case"FunctionExpression":case"Identifier":case"Line":case"Literal":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"Program":case"Property":case"SequenceExpression":case"SwitchCase":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":case"VariableDeclarator":return false;case"ConditionalExpression":if(!B){return false;}n.test.update("blanket.$b("+F+", "+o.length+", "+n.test.source()+")");o.push({alternate:n.alternate.loc,consequent:n.consequent.loc});return true;case"ExpressionStatement":if(n.expression.type==="Literal"&&n.expression.value==="use strict"){return false;}case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":case"WithStatement":case"BreakStatement":case"ContinueStatement":case"FunctionDeclaration":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":return q(n);case"IfStatement":if(d(undefined,n.consequent)){B=false;}n.test.update("blanket.$b("+F+", "+(B?o.length:-1)+", "+n.test.source()+", "+L+")");t();if(B){o.push({alternate:(n.alternate||n.test).loc,consequent:n.consequent.loc});}return true;case"LogicalExpression":if(!B){return false;}if(n.operator==="||"||n.operator==="&&"){p="blanket.$b("+F+", "+o.length+", "+n.left.source()+") "+w()+" ("+n.right.source()+")";if(!r.test(n.loc.source[n.range[0]])){p=" "+p;}n.update(p);o.push({alternate:n.operator==="&&"?n.left.loc:n.right.loc,consequent:n.operator==="&&"?n.right.loc:n.left.loc});}return true;case"VariableDeclaration":if(n.parent.type==="ForInStatement"||n.parent.type==="ForStatement"){return false;}return q(n);case"LabeledStatement":default:throw new Error(n.source());}}function e(){var M={},t=[],T;QUnit.begin(function(o){T=o.modules.length;o.modules.forEach(function(i){M[i.name]=i;});});QUnit.moduleStart(function(o){t=t.concat(Object.keys(M).filter(function(i){return M[i].tests===o.tests;}));});return function(){return t.length<T?t:undefined;};}if(window.blanket){window._$blanket={};blanket.$b=b;blanket.$l=l;blanket.instrument=a;var G=e();sap.ui.require(["sap/ui/test/BlanketReporter"],function(B){blanket.options("reporter",B.bind(null,g(),G));});}var D,C="sap.ui.base.SyncPromise",m,N=0,u={};function h(R){var i,L=Object.keys(u).length,M="Uncaught (in promise): "+L+" times\n",p;if(L){for(i in u){p=u[i];if(p.getResult()&&p.getResult().stack){M+=p.getResult().stack;}else{M+=p.getResult();}if(p.$error.stack){M+="\n>>> SyncPromise rejected with above reason...\n"+p.$error.stack.split("\n").slice(2).join("\n");}M+="\n\n";}u={};if(R){R(M);}else if(D){jQuery.sap.log.debug("Clearing "+L+" uncaught promises",M,C);}}}function j(p,i){if(i){delete u[p.$id];if(D){jQuery.sap.log.debug("Promise "+p.$id+" caught",Object.keys(u),C);}return;}p.$id=N++;p.$error=new Error();u[p.$id]=p;if(D){jQuery.sap.log.debug("Promise "+p.$id+" rejected with "+p.getResult(),Object.keys(u),C);}}function k(t,H){var A,B;H=H||{};A=H.afterEach||function(){};B=H.beforeEach||function(){};H.afterEach=function(i){var n=h.bind(null,i.ok.bind(i,false));function o(E){n();throw E;}function p(R){if(R&&typeof R.then==="function"){return R.then(p,o);}n();return R;}try{return p(A.apply(this,arguments));}catch(E){o(E);}};H.beforeEach=function(){h();return B.apply(this,arguments);};m(t,H);}if(QUnit&&QUnit.module!==k){m=QUnit.module.bind(QUnit);QUnit.module=k;sap.ui.require(["sap/ui/base/SyncPromise","jquery.sap.global"],function(S){D=jQuery.sap.log.isLoggable(jQuery.sap.log.Level.DEBUG,C);S.listener=j;});QUnit.config.autostart=false;sap.ui.require(["sap/ui/core/Core"],function(i){var o=sap.ui.getCore();o.attachInit(function(){function n(){try{o.detachThemeChanged(n);QUnit.start();}catch(p){}}if(o.isThemeApplied()){n();}else{o.attachThemeChanged(n);}});});QUnit.begin(function(){jQuery("#qunit-modulefilter-dropdown-list").css("max-height","none");jQuery("#qunit-modulefilter-dropdown").click(function(M){if(M.target.tagName==="LABEL"){setTimeout(function(){jQuery("#qunit-modulefilter-actions").children().first().click();});}});});}}());
